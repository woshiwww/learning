### 2022-7-13

快照的创建对每个桶创建快照，桶的信息在每个逻辑节点上都存在。

### 2022-7-14

类快照模块的功能：接收RepEngine下发的快照管理指令，为对象存储系统基于桶的复制管理特定时间的快照。

生成快照任务有两个方式：

1. 来自NAL的前端消息。

2. 来自后台JNAL的重新加载请求。

**类快照创、删、查时主要相关的几个模块：**

- RepEngine：这是一个复制引擎模块，主要负责配置的对接，以及管理复制任务的运行。和类快照控制端之间的联系主要是，下发快照创建、删除、查询指令。
- 快照控制端模块：接收RepEngine下发的指令，为对象存储系统基于桶的复制管理特定时间点的快照。利用lmos1提供服务，与别的每个olmos的差异管理模块之间存在交互。lmos1通知其他逻辑节点创建快照对应的快照差异文件，也接收差异模块对于快照列表的查询。
- lmos：在逻辑节点上执行创建差异文件和删除差异文件，以及获取最大类快照表。

用户感知不到逻辑节点的存在，只知道自己有桶来放数据，类快照也是基于桶为对象来创建的。

- 每个集群上只有一个逻辑节点1，即olmos1，
- 创建差异文件时，每个逻辑节点创建之后便返回一个差异文件，然后删除差异文件。一个一个的逻辑节点串行执行，直到所有的逻辑节点创建完毕。
- 每个逻辑节点下都有一个或者多个桶。

由于创建快照和删除快照比较费时，所以为了提供可靠及时的状态管理。

1. 第一阶段，创建对应的快照任务，然后固化并返回。在之后创建快照时，要主动查询快照任务是否完成。
2. 第二阶段，由相应的快照任务具体处理。

### 2022-7-15

差异信息是由olmos根据两个快照版本对比获得。

通路：两个集群之间的逻辑连接关系。

链路：两个节点之间的NAL连接。

### 2022-9-19

tranceID  用于日志部分